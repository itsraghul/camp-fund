(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[17],{46644:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/projects/requests",function(){return r(24162)}])},24162:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ne}});var n=r(34051),o=r.n(n),a=r(85893),s=r(67294),c=r(87462),i=r(13871),l=r(86010),u=r(98459),p=r(28935),d=r(12519),f=r(92248);function h(e){var t=e.children,r=e.className,n=(0,l.Z)(r),o=(0,p.Z)(h,e),a=(0,d.Z)(h,e);return s.createElement(a,(0,c.Z)({},o,{className:n}),t)}h.handledProps=["as","children","className"],h.defaultProps={as:"tbody"},h.propTypes={};var v=h,m=r(69591),b=r(45150);function y(e){var t=e.active,r=e.children,n=e.className,o=e.collapsing,a=e.content,i=e.disabled,h=e.error,v=e.icon,m=e.negative,g=e.positive,w=e.selectable,x=e.singleLine,j=e.textAlign,Z=e.verticalAlign,P=e.warning,R=e.width,k=(0,l.Z)((0,u.lG)(t,"active"),(0,u.lG)(o,"collapsing"),(0,u.lG)(i,"disabled"),(0,u.lG)(h,"error"),(0,u.lG)(m,"negative"),(0,u.lG)(g,"positive"),(0,u.lG)(w,"selectable"),(0,u.lG)(x,"single line"),(0,u.lG)(P,"warning"),(0,u.X4)(j),(0,u.Ok)(Z),(0,u.H0)(R,"wide"),n),G=(0,p.Z)(y,e),O=(0,d.Z)(y,e);return f.kK(r)?s.createElement(O,(0,c.Z)({},G,{className:k}),b.Z.create(v),a):s.createElement(O,(0,c.Z)({},G,{className:k}),r)}y.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],y.defaultProps={as:"td"},y.propTypes={},y.create=(0,m.u5)(y,(function(e){return{content:e}}));var g=y;function w(e){var t=e.children,r=e.className,n=e.content,o=e.fullWidth,a=(0,l.Z)((0,u.lG)(o,"full-width"),r),i=(0,p.Z)(w,e),h=(0,d.Z)(w,e);return s.createElement(h,(0,c.Z)({},i,{className:a}),f.kK(t)?n:t)}w.handledProps=["as","children","className","content","fullWidth"],w.defaultProps={as:"thead"},w.propTypes={};var x=w;function j(e){var t=e.as,r=(0,p.Z)(j,e);return s.createElement(x,(0,c.Z)({},r,{as:t}))}j.handledProps=["as"],j.propTypes={},j.defaultProps={as:"tfoot"};var Z=j;function P(e){var t=e.as,r=e.className,n=e.sorted,o=(0,l.Z)((0,u.cD)(n,"sorted"),r),a=(0,p.Z)(P,e);return s.createElement(g,(0,c.Z)({},a,{as:t,className:o}))}P.handledProps=["as","className","sorted"],P.propTypes={},P.defaultProps={as:"th"};var R=P;function k(e){var t=e.active,r=e.cellAs,n=e.cells,o=e.children,a=e.className,h=e.disabled,v=e.error,m=e.negative,b=e.positive,y=e.textAlign,w=e.verticalAlign,x=e.warning,j=(0,l.Z)((0,u.lG)(t,"active"),(0,u.lG)(h,"disabled"),(0,u.lG)(v,"error"),(0,u.lG)(m,"negative"),(0,u.lG)(b,"positive"),(0,u.lG)(x,"warning"),(0,u.X4)(y),(0,u.Ok)(w),a),Z=(0,p.Z)(k,e),P=(0,d.Z)(k,e);return f.kK(o)?s.createElement(P,(0,c.Z)({},Z,{className:j}),(0,i.Z)(n,(function(e){return g.create(e,{defaultProps:{as:r}})}))):s.createElement(P,(0,c.Z)({},Z,{className:j}),o)}k.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],k.defaultProps={as:"tr",cellAs:"td"},k.propTypes={},k.create=(0,m.u5)(k,(function(e){return{cells:e}}));var G=k;function O(e){var t=e.attached,r=e.basic,n=e.celled,o=e.children,a=e.className,h=e.collapsing,m=e.color,b=e.columns,y=e.compact,g=e.definition,w=e.fixed,j=e.footerRow,P=e.headerRow,R=e.headerRows,k=e.inverted,_=e.padded,A=e.renderBodyRow,N=e.selectable,C=e.singleLine,E=e.size,q=e.sortable,T=e.stackable,B=e.striped,z=e.structured,F=e.tableData,H=e.textAlign,S=e.unstackable,D=e.verticalAlign,L=(0,l.Z)("ui",m,E,(0,u.lG)(n,"celled"),(0,u.lG)(h,"collapsing"),(0,u.lG)(g,"definition"),(0,u.lG)(w,"fixed"),(0,u.lG)(k,"inverted"),(0,u.lG)(N,"selectable"),(0,u.lG)(C,"single line"),(0,u.lG)(q,"sortable"),(0,u.lG)(T,"stackable"),(0,u.lG)(B,"striped"),(0,u.lG)(z,"structured"),(0,u.lG)(S,"unstackable"),(0,u.sU)(t,"attached"),(0,u.sU)(r,"basic"),(0,u.sU)(y,"compact"),(0,u.sU)(_,"padded"),(0,u.X4)(H),(0,u.Ok)(D),(0,u.H0)(b,"column"),"table",a),X=(0,p.Z)(O,e),K=(0,d.Z)(O,e);if(!f.kK(o))return s.createElement(K,(0,c.Z)({},X,{className:L}),o);var U={defaultProps:{cellAs:"th"}},I=(P||R)&&s.createElement(x,null,G.create(P,U),(0,i.Z)(R,(function(e){return G.create(e,U)})));return s.createElement(K,(0,c.Z)({},X,{className:L}),I,s.createElement(v,null,A&&(0,i.Z)(F,(function(e,t){return G.create(A(e,t))}))),j&&s.createElement(Z,null,G.create(j)))}O.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],O.defaultProps={as:"table"},O.propTypes={},O.Body=v,O.Cell=g,O.Footer=Z,O.Header=x,O.HeaderCell=R,O.Row=G;var _=O,A=r(80967),N=r(96215),C=r(83544),E=r(1508),q=r(53445);function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t,r,n,o,a,s){try{var c=e[a](s),i=c.value}catch(l){return void r(l)}c.done?t(i):Promise.resolve(i).then(n,o)}function z(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){B(a,n,o,s,c,"next",e)}function c(e){B(a,n,o,s,c,"throw",e)}s(void 0)}))}}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function L(e,t){return!t||"object"!==K(t)&&"function"!==typeof t?T(e):t}function X(e,t){return X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},X(e,t)}var K=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=D(e);if(t){var o=D(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return L(this,r)}}var I=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(c,e);var t,r,n,s=U(c);function c(){var e;F(this,c);var t=T(e=s.apply(this,arguments));S(T(e),"onApprove",z(o().mark((function e(){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,q.Z)(t.props.address),e.next=3,E.Z.eth.getAccounts();case 3:return n=e.sent,e.next=6,r.methods.approveRequest(t.props.id).send({from:n[0]});case 6:case"end":return e.stop()}}),e)}))));var r=T(e);return S(T(e),"onFinalize",z(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,q.Z)(r.props.address),e.next=3,E.Z.eth.getAccounts();case 3:return n=e.sent,e.next=6,t.methods.finalizeRequest(r.props.id).send({from:n[0]});case 6:case"end":return e.stop()}}),e)})))),e}return t=c,(r=[{key:"render",value:function(){var e=_.Row,t=_.Cell,r=this.props,n=r.id,o=r.request,s=o.approvalCount>this.props.approversCount/2;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(e,{disabled:o.complete,positive:s&&!o.complete,children:[(0,a.jsx)(t,{children:n}),(0,a.jsx)(t,{children:o.description}),(0,a.jsx)(t,{children:E.Z.utils.fromWei(o.value,"ether")}),(0,a.jsx)(t,{children:o.recipient}),(0,a.jsxs)(t,{children:[o.approvalCount,"/",this.props.approversCount]}),(0,a.jsx)(t,{children:o.complete?"Request":(0,a.jsx)(A.Z,{color:"green",basic:!0,onClick:this.onApprove,children:"Approve"})}),(0,a.jsx)(t,{children:o.complete?"Authorized":(0,a.jsx)(A.Z,{color:"teal",basic:!0,onClick:this.onFinalize,children:"Finalize"})})]})})}}])&&H(t.prototype,r),n&&H(t,n),c}(s.Component),W=I;function J(e,t,r,n,o,a,s){try{var c=e[a](s),i=c.value}catch(l){return void r(l)}c.done?t(i):Promise.resolve(i).then(n,o)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}function Y(e,t){return!t||"object"!==ee(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e,t){return $=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$(e,t)}var ee=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=V(e);if(t){var o=V(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Y(this,r)}}var re=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(c,e);var t,r,n,s=te(c);function c(){return M(this,c),s.apply(this,arguments)}return t=c,n=[{key:"getInitialProps",value:function(e){return(t=o().mark((function t(){var r,n,a,s,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.query.address,n=(0,q.Z)(r),t.next=4,n.methods.getRequestCount().call();case 4:return a=t.sent,t.next=7,n.methods.approversCount().call();case 7:return s=t.sent,t.next=10,Promise.all(Array(parseInt(a)).fill().map((function(e,t){return n.methods.requests(t).call()})));case 10:return c=t.sent,t.abrupt("return",{address:r,requests:c,requestCount:a,approversCount:s});case 12:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function s(e){J(a,n,o,s,c,"next",e)}function c(e){J(a,n,o,s,c,"throw",e)}s(void 0)}))})();var t}}],(r=[{key:"renderRow",value:function(){var e=this;return this.props.requests.map((function(t,r){return(0,a.jsx)(W,{id:r,request:t,address:e.props.address,approversCount:e.props.approversCount},r)}))}},{key:"render",value:function(){var e=_.Header,t=_.Row,r=_.HeaderCell,n=_.Body;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(C.Z,{children:[(0,a.jsx)("h2",{children:"Request"}),(0,a.jsx)(N.Link,{route:"/projects/".concat(this.props.address,"/requests/new"),children:(0,a.jsx)("a",{children:(0,a.jsx)(A.Z,{floated:"right",style:{marginBottom:10},color:"instagram",children:"Add Request"})})}),(0,a.jsxs)(_,{children:[(0,a.jsx)(e,{children:(0,a.jsxs)(t,{children:[(0,a.jsx)(r,{children:"ID"}),(0,a.jsx)(r,{children:"Description"}),(0,a.jsx)(r,{children:"Amount"}),(0,a.jsx)(r,{children:"Recipient"}),(0,a.jsx)(r,{children:"Approval Count"}),(0,a.jsx)(r,{children:"Approve"}),(0,a.jsx)(r,{children:"Finalize"})]})}),(0,a.jsx)(n,{children:this.renderRow()})]}),(0,a.jsx)("h4",{children:"Found ".concat(this.props.requestCount," requests.")})]})})}}])&&Q(t.prototype,r),n&&Q(t,n),c}(s.Component),ne=re}},function(e){e.O(0,[482,714,127,865,774,888,179],(function(){return t=46644,e(e.s=t);var t}));var t=e.O();_N_E=t}]);